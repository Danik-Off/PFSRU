# Документация для скрипта PAC (Proxy Auto-Configuration)

Этот документ предоставляет обзор скрипта Proxy Auto-Configuration (PAC), используемого для управления настройками прокси-сервера для различных сервисов.

## Переменные конфигурации

- **useCustomProxy**:  
  - Тип: `boolean`  
  - Описание: Установите `true`, чтобы использовать пользовательский прокси; установите `false`, чтобы использовать системный прокси.  
  - Значение по умолчанию: `true`

- **customProxyType**:  
  - Тип: `string`  
  - Описание: Тип пользовательского прокси (например, `"HTTP"`, `"SOCKS5"`).  
  - Значение по умолчанию: `"SOCKS5"`

- **customProxyIP**:  
  - Тип: `string`  
  - Описание: IP-адрес пользовательского прокси.  
  - Значение по умолчанию: `"127.0.0.1"`

- **customProxyPort**:  
  - Тип: `string`  
  - Описание: Порт пользовательского прокси.  
  - Значение по умолчанию: `"2080"`

- **systemProxy**:  
  - Тип: `string`  
  - Описание: Настройка системного прокси (по умолчанию `"PROXY"`).  
  - Значение по умолчанию: `"PROXY"`

- **directConnection**:  
  - Тип: `string`  
  - Описание: Настройка для прямого подключения.  
  - Значение по умолчанию: `"DIRECT"`

## Настройки для разблокировки сервисов

Скрипт содержит настройки для разблокировки определенных сервисов. Каждый сервис включает:

- **domains**: Список доменов, связанных с сервисом.
- **patterns**: Шаблоны URL, которые нужно сопоставить для сервиса.
- **allowedIPs**: Список IP-адресов, которые должны проходить через прокси.

### Примеры сервисов

#### YouTube
- **Доменa**: `["youtube.com", "ytimg.com", "youtu.be"]`
- **Шаблоны**: 
  - `"*youtube.com/get_video_info*"`
  - `"*youtube.com/api/timedtext*"`
  - `"*youtube.com/watch*"`
  - `"*redirector.googlevideo.com*"`
  - `"*googlevideo.com*"`

#### Discord
- **Доменa**: `["discord.com", "discordapp.com"]`
- **Шаблоны**:
  - `"*discord.com/api/v*"`
  - `"*discordapp.com/api/v*"`
  - `"*discord.gg/invite/*"`

#### Twitter
- **Доменa**: `["twitter.com", "twimg.com", "t.co", "x.com"]`
- **Шаблоны**: `[]`

#### Facebook
- **Доменa**: `["facebook.com", "fbcdn.net", "fb.com", "messenger.com"]`
- **Шаблоны**: `[]`

#### ChatGPT
- **Доменa**: `["chatgpt.com", "api.openai.com"]`
- **Шаблоны**: `[]`

## Заблокированные IP-адреса

Вы можете добавить заблокированные IP-адреса в массив `blockedIPs`.

## Частные сети

Частные сети, которые всегда подключаются напрямую, определены в массиве `privateNet`:
- `["10.0.0.0", "255.0.0.0"]`
- `["172.16.0.0", "255.240.0.0"]`
- `["192.168.0.0", "255.255.0.0"]`

## Обзор функций

- **getProxyConfig()**:  
  Возвращает строку прокси на основе конфигурации.

- **isPrivateNetwork(host)**:  
  Проверяет, находится ли данный хост в частной сети.

- **isBlockedIP(host)**:  
  Проверяет, является ли данный хост заблокированным IP.

- **isAllowedIP(host)**:  
  Проверяет, является ли данный хост разрешенным IP для использования прокси.

- **matchesServicePatterns(url, host)**:  
  Проверяет, соответствует ли URL или хост каким-либо шаблонам сервиса.

## Основная функция

### FindProxyForURL(url, host)

Это основная функция для определения, какой прокси использовать для данного URL и хоста. Она оценивает следующие условия в порядке:

1. Если хост является частью частной сети, возвращается прямое соединение.
2. Если хост является заблокированным IP, возвращается прямое соединение.
3. Если хост является разрешенным IP для использования прокси, возвращается конфигурация прокси.
4. Если хост или URL соответствуют каким-либо шаблонам сервиса, возвращается конфигурация прокси.
5. Если ни одно из условий не выполнено, возвращается прямое соединение.

## Использование

Чтобы использовать этот PAC-скрипт, интегрируйте его в свой браузер или приложение, поддерживающее PAC-файлы. Это позволит включить соответствующие настройки прокси на основе определенных правил и сервисов.
